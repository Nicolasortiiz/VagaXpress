{"architecture":"amd64","config":{"ExposedPorts":{"80/tcp":{}},"Env":["PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin","PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c","PHP_INI_DIR=/usr/local/etc/php","APACHE_CONFDIR=/etc/apache2","APACHE_ENVVARS=/etc/apache2/envvars","PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","PHP_LDFLAGS=-Wl,-O1 -pie","GPG_KEYS=39B641343D8C104B2B146DC3F9C39DC0B9698544 E60913E4DF209907D8E30D96659A97C9CF2A795A 1198C0117593497A5EC5C199286AF1F9897469DC","PHP_VERSION=8.2.28","PHP_URL=https://www.php.net/distributions/php-8.2.28.tar.xz","PHP_ASC_URL=https://www.php.net/distributions/php-8.2.28.tar.xz.asc","PHP_SHA256=af8c9153153a7f489153b7a74f2f29a5ee36f5cb2c6c6929c98411a577e89c91"],"Entrypoint":["docker-php-entrypoint"],"Cmd":["apache2-foreground"],"WorkingDir":"/var/www/html","StopSignal":"SIGWINCH"},"created":"2025-03-13T21:54:41Z","history":[{"created":"2025-03-13T21:54:41Z","created_by":"# debian.sh --arch 'amd64' out/ 'bookworm' '@1747699200'","comment":"debuerreotype 0.15"},{"created":"2025-03-13T21:54:41Z","created_by":"RUN /bin/sh -c set -eux; \t{ \t\techo 'Package: php*'; \t\techo 'Pin: release *'; \t\techo 'Pin-Priority: -1'; \t} \u003e /etc/apt/preferences.d/no-debian-php # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"ENV PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"RUN /bin/sh -c set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends \t\t$PHPIZE_DEPS \t\tca-certificates \t\tcurl \t\txz-utils \t; \trm -rf /var/lib/apt/lists/* # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"ENV PHP_INI_DIR=/usr/local/etc/php","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"RUN /bin/sh -c set -eux; \tmkdir -p \"$PHP_INI_DIR/conf.d\"; \t[ ! -d /var/www/html ]; \tmkdir -p /var/www/html; \tchown www-data:www-data /var/www/html; \tchmod 1777 /var/www/html # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"ENV APACHE_CONFDIR=/etc/apache2","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"ENV APACHE_ENVVARS=/etc/apache2/envvars","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"RUN /bin/sh -c set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends apache2; \trm -rf /var/lib/apt/lists/*; \t\tsed -ri 's/^export ([^=]+)=(.*)$/: ${\\1:=\\2}\\nexport \\1/' \"$APACHE_ENVVARS\"; \t\t. \"$APACHE_ENVVARS\"; \tfor dir in \t\t\"$APACHE_LOCK_DIR\" \t\t\"$APACHE_RUN_DIR\" \t\t\"$APACHE_LOG_DIR\" \t\t\"$APACHE_RUN_DIR/socks\" \t; do \t\trm -rvf \"$dir\"; \t\tmkdir -p \"$dir\"; \t\tchown \"$APACHE_RUN_USER:$APACHE_RUN_GROUP\" \"$dir\"; \t\tchmod 1777 \"$dir\"; \tdone; \t\trm -rvf /var/www/html/*; \t\tln -sfT /dev/stderr \"$APACHE_LOG_DIR/error.log\"; \tln -sfT /dev/stdout \"$APACHE_LOG_DIR/access.log\"; \tln -sfT /dev/stdout \"$APACHE_LOG_DIR/other_vhosts_access.log\"; \tchown -R --no-dereference \"$APACHE_RUN_USER:$APACHE_RUN_GROUP\" \"$APACHE_LOG_DIR\" # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"RUN /bin/sh -c a2dismod mpm_event \u0026\u0026 a2enmod mpm_prefork # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"RUN /bin/sh -c { \t\techo '\u003cFilesMatch \\.php$\u003e'; \t\techo '\\tSetHandler application/x-httpd-php'; \t\techo '\u003c/FilesMatch\u003e'; \t\techo; \t\techo 'DirectoryIndex disabled'; \t\techo 'DirectoryIndex index.php index.html'; \t\techo; \t\techo '\u003cDirectory /var/www/\u003e'; \t\techo '\\tOptions -Indexes'; \t\techo '\\tAllowOverride All'; \t\techo '\u003c/Directory\u003e'; \t} | tee \"$APACHE_CONFDIR/conf-available/docker-php.conf\" \t\u0026\u0026 a2enconf docker-php # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"ENV PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"ENV PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"ENV PHP_LDFLAGS=-Wl,-O1 -pie","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"ENV GPG_KEYS=39B641343D8C104B2B146DC3F9C39DC0B9698544 E60913E4DF209907D8E30D96659A97C9CF2A795A 1198C0117593497A5EC5C199286AF1F9897469DC","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"ENV PHP_VERSION=8.2.28","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"ENV PHP_URL=https://www.php.net/distributions/php-8.2.28.tar.xz PHP_ASC_URL=https://www.php.net/distributions/php-8.2.28.tar.xz.asc","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"ENV PHP_SHA256=af8c9153153a7f489153b7a74f2f29a5ee36f5cb2c6c6929c98411a577e89c91","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"RUN /bin/sh -c set -eux; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends gnupg; \trm -rf /var/lib/apt/lists/*; \t\tmkdir -p /usr/src; \tcd /usr/src; \t\tcurl -fsSL -o php.tar.xz \"$PHP_URL\"; \t\tif [ -n \"$PHP_SHA256\" ]; then \t\techo \"$PHP_SHA256 *php.tar.xz\" | sha256sum -c -; \tfi; \t\tif [ -n \"$PHP_ASC_URL\" ]; then \t\tcurl -fsSL -o php.tar.xz.asc \"$PHP_ASC_URL\"; \t\texport GNUPGHOME=\"$(mktemp -d)\"; \t\tfor key in $GPG_KEYS; do \t\t\tgpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\"; \t\tdone; \t\tgpg --batch --verify php.tar.xz.asc php.tar.xz; \t\tgpgconf --kill all; \t\trm -rf \"$GNUPGHOME\"; \tfi; \t\tapt-mark auto '.*' \u003e /dev/null; \tapt-mark manual $savedAptMark \u003e /dev/null; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"COPY docker-php-source /usr/local/bin/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"RUN /bin/sh -c set -eux; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tapache2-dev \t\tlibargon2-dev \t\tlibcurl4-openssl-dev \t\tlibonig-dev \t\tlibreadline-dev \t\tlibsodium-dev \t\tlibsqlite3-dev \t\tlibssl-dev \t\tlibxml2-dev \t\tzlib1g-dev \t; \t\texport \t\tCFLAGS=\"$PHP_CFLAGS\" \t\tCPPFLAGS=\"$PHP_CPPFLAGS\" \t\tLDFLAGS=\"$PHP_LDFLAGS\" \t\tPHP_BUILD_PROVIDER='https://github.com/docker-library/php' \t\tPHP_UNAME='Linux - Docker' \t; \tdocker-php-source extract; \tcd /usr/src/php; \tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \tdebMultiarch=\"$(dpkg-architecture --query DEB_BUILD_MULTIARCH)\"; \tif [ ! -d /usr/include/curl ]; then \t\tln -sT \"/usr/include/$debMultiarch/curl\" /usr/local/include/curl; \tfi; \t./configure \t\t--build=\"$gnuArch\" \t\t--with-config-file-path=\"$PHP_INI_DIR\" \t\t--with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" \t\t\t\t--enable-option-checking=fatal \t\t\t\t--with-mhash \t\t\t\t--with-pic \t\t\t\t--enable-mbstring \t\t--enable-mysqlnd \t\t--with-password-argon2 \t\t--with-sodium=shared \t\t--with-pdo-sqlite=/usr \t\t--with-sqlite3=/usr \t\t\t\t--with-curl \t\t--with-iconv \t\t--with-openssl \t\t--with-readline \t\t--with-zlib \t\t\t\t--disable-phpdbg \t\t\t\t--with-pear \t\t\t\t$(test \"$gnuArch\" = 'riscv64-linux-gnu' \u0026\u0026 echo '--without-pcre-jit') \t\t--with-libdir=\"lib/$debMultiarch\" \t\t\t\t--disable-cgi \t\t\t\t--with-apxs2 \t; \tmake -j \"$(nproc)\"; \tfind -type f -name '*.a' -delete; \tmake install; \tfind \t\t/usr/local \t\t-type f \t\t-perm '/0111' \t\t-exec sh -euxc ' \t\t\tstrip --strip-all \"$@\" || : \t\t' -- '{}' + \t; \tmake clean; \t\tcp -v php.ini-* \"$PHP_INI_DIR/\"; \t\tcd /; \tdocker-php-source delete; \t\tapt-mark auto '.*' \u003e /dev/null; \t[ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; \tfind /usr/local -type f -executable -exec ldd '{}' ';' \t\t| awk '/=\u003e/ { so = $(NF-1); if (index(so, \"/usr/local/\") == 1) { next }; gsub(\"^/(usr/)?\", \"\", so); printf \"*%s\\n\", so }' \t\t| sort -u \t\t| xargs -r dpkg-query --search \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -r apt-mark manual \t; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \trm -rf /var/lib/apt/lists/*; \t\tpecl update-channels; \trm -rf /tmp/pear ~/.pearrc; \t\tphp --version # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"COPY docker-php-ext-* docker-php-entrypoint /usr/local/bin/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"RUN /bin/sh -c docker-php-ext-enable sodium # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"ENTRYPOINT [\"docker-php-entrypoint\"]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"STOPSIGNAL SIGWINCH","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"COPY apache2-foreground /usr/local/bin/ # buildkit","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"WORKDIR /var/www/html","comment":"buildkit.dockerfile.v0"},{"created":"2025-03-13T21:54:41Z","created_by":"EXPOSE map[80/tcp:{}]","comment":"buildkit.dockerfile.v0","empty_layer":true},{"created":"2025-03-13T21:54:41Z","created_by":"CMD [\"apache2-foreground\"]","comment":"buildkit.dockerfile.v0","empty_layer":true}],"os":"linux","rootfs":{"type":"layers","diff_ids":["sha256:ace34d1d784c01e3f9d156687089e8f58f786e23ccd097bdbbf337d6d28b3783","sha256:f4f83e178afdb9a5c7f2f7db63c2ff5279d3e3105bd4619de10b5609bd4b9786","sha256:0acba961ef4b81c75249882ad147b3e1ac227fb15ab672084f87f2ad37a7dc2d","sha256:5369b2c8626cc4579ceeb637f977544c307cf16252b4c51994c1d7accae5d9a3","sha256:c0ace0569af1c94f7654d2e544b7283a4e497d3b7ff79025666efe14ff48117a","sha256:c900b618bc093a63a78e4e181ec8f4733277d25b413459ea8e0566a2623f8162","sha256:e4c3b971a1d8e4a482c92cd01ccfdb7f2851f4eb4ba3da74a8be1322459880e9","sha256:4ddb12a7e4902f0a2e70904bdefaca2d115bf9bc026eb5de32273d71f8f3ee17","sha256:cd984ab6bc623a5021c0f95c55b31c9af1a8a523c4e2832867c01aeb7a763bc8","sha256:cf7d4060c4f3961b957ad46b0caeb1a27915fc41248798ea32736a995077bcda","sha256:46b824c41a1ed3ae5353827ce634e552eb249ae3264a6c62264b7f15bb2f76a6","sha256:21ff49a2a9e244821f6c321d3ac669b7522fbc51c4c1dd75d9896d7988b0eb55","sha256:f2614b0b05e50bdaef94dd783223bc112fbc5e0a7293954c14081bfd560de2b3","sha256:5f70bf18a086007016e948b04aed3b82103a36bea41755b6cddfaf10ace3c6ef"]}}